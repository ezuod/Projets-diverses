import{d as w,r as c,f as S,c as r,a as s,t as u,o as n,j as C,k as v,l as b,m as D,u as R,w as F,p as L,q as N,F as f,h as U,s as V,b as x}from"./index-AmsMOCfM.js";import{a as m}from"./http-api-CiJTaV0F.js";import{_ as y}from"./Image.vue_vue_type_style_index_0_lang-CDyCjaeC.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const B={key:0,class:"details-container"},E={class:"details-name"},j={class:"details-meta"},O={key:1},z=w({__name:"Details",props:{id:{}},setup(g){const d=g,l=c(null);return S(async()=>{try{const a=await m.getImageDetails(d.id);l.value=a}catch(a){console.error("Failed to fetch image details:",a)}}),(a,i)=>l.value?(n(),r("div",B,[s("div",null,[s("h4",E,u(l.value.name),1),s("p",j," Type: "+u(l.value.type)+" | Size: "+u(l.value.size),1)])])):(n(),r("div",O,i[0]||(i[0]=[s("p",null,"Loading image details...",-1)])))}}),M=h(z,[["__scopeId","data-v-db28c2a7"]]),q={class:"image-container"},P={class:"similar-controls"},T=["onClick"],A={class:"distance"},G=w({__name:"View",props:{id:{}},setup(g){const d=C(),l=R(),a=c(Number(d.params.id)||0),i=c(5),_=c([]),k=async()=>{try{await m.deleteImage(a.value),alert("Image deleted successfully"),l.push("/gallery")}catch(e){console.error("Failed to delete image:",e),alert("Failed to delete image")}},p=async e=>{try{const t=await m.getSimilarImages(a.value,e);_.value=t}catch(t){console.error("Error fetching similar images:",t)}},I=e=>{l.push({name:"view",params:{id:e.toString()}})},$=async()=>{try{const e=await m.getImage(a.value),t=window.URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download=`image-${a.value}`,o.click(),window.URL.revokeObjectURL(t)}catch(e){console.error("Error downloading image:",e)}};return v(()=>d.params.id,e=>{a.value=Number(e)||0,p(i.value)},{immediate:!0}),v(i,e=>{e>0&&p(e)}),v(a,()=>{p(i.value)},{immediate:!0}),(e,t)=>(n(),r(f,null,[s("button",{onClick:t[0]||(t[0]=o=>{D(l).push("/gallery")}),class:"return-button"},"Return"),s("button",{onClick:k,class:"delete-button"},"Delete"),s("button",{onClick:$,class:"download-button"},"Download"),(n(),b(M,{id:a.value,key:a.value},null,8,["id"])),s("div",q,[(n(),b(y,{id:a.value,key:a.value,class:"img"},null,8,["id"]))]),s("div",P,[t[3]||(t[3]=s("h4",null,"Similar to this one:",-1)),F(s("select",{id:"number-select","onUpdate:modelValue":t[1]||(t[1]=o=>i.value=o),class:"number-select"},t[2]||(t[2]=[N('<option value="1" data-v-abdd1ea1>1</option><option value="3" data-v-abdd1ea1>3</option><option value="5" data-v-abdd1ea1>5</option><option value="10" data-v-abdd1ea1>10</option><option value="20" data-v-abdd1ea1>20</option>',5)]),512),[[L,i.value]])]),s("div",V(e.$attrs,{class:"gallery"}),[(n(!0),r(f,null,U(_.value,o=>(n(),r("div",{key:o.id,class:"img-wrapper",onClick:H=>I(o.id)},[x(y,{id:o.id,class:"image-similar"},null,8,["id"]),s("span",A,u(o.distance.toFixed(2)),1)],8,T))),128))],16)],64))}}),X=h(G,[["__scopeId","data-v-abdd1ea1"]]);export{X as default};
