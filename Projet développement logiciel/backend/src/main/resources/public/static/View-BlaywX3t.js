import{d as h,r as c,f as k,c as r,a as o,t as u,o as i,j as S,k as D,l as v,m as _,p as R,u as F,w as L,q as U,s as x,F as y,h as B,x as N,b as V}from"./index-BrHa7k9I.js";import{a as m}from"./http-api-CiJTaV0F.js";import{_ as b}from"./Image.vue_vue_type_style_index_0_lang-BGl0HVzI.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const E={key:0,class:"details-container"},j={class:"details-name"},O={class:"details-meta"},z={key:1},M=h({__name:"Details",props:{id:{}},setup(f){const d=f,l=c(null);return k(async()=>{try{const t=await m.getImageDetails(d.id);l.value=t}catch(t){console.error("Failed to fetch image details:",t)}}),(t,n)=>l.value?(i(),r("div",E,[o("div",null,[o("h4",j,u(l.value.name),1),o("p",O," Type: "+u(l.value.type)+" | Size: "+u(l.value.size),1)])])):(i(),r("div",z,n[0]||(n[0]=[o("p",null,"Loading image details...",-1)])))}}),q=w(M,[["__scopeId","data-v-db28c2a7"]]),A={class:"buttons-container"},P={class:"image-container"},T={class:"similar-controls"},G=["onClick"],H={class:"distance"},J=h({__name:"View",props:{id:{}},setup(f){k(()=>{document.body.style.backgroundColor="#C9A0DC"}),S(()=>{document.body.style.backgroundColor=""});const d=D(),l=F(),t=c(Number(d.params.id)||0),n=c(5),g=c([]),C=async()=>{try{await m.deleteImage(t.value),alert("Image deleted successfully"),l.push("/gallery")}catch(e){console.error("Failed to delete image:",e),alert("Failed to delete image")}},p=async e=>{try{const a=await m.getSimilarImages(t.value,e);g.value=a}catch(a){console.error("Error fetching similar images:",a)}},I=e=>{l.push({name:"view",params:{id:e.toString()}})},$=async()=>{try{const e=await m.getImage(t.value),a=window.URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=`image-${t.value}`,s.click(),window.URL.revokeObjectURL(a)}catch(e){console.error("Error downloading image:",e)}};return v(()=>d.params.id,e=>{t.value=Number(e)||0,p(n.value)},{immediate:!0}),v(n,e=>{e>0&&p(e)}),v(t,()=>{p(n.value)},{immediate:!0}),(e,a)=>(i(),r(y,null,[o("div",A,[o("button",{onClick:a[0]||(a[0]=s=>{R(l).push("/gallery")}),class:"return-button"},"Return"),o("button",{onClick:C,class:"delete-button"},"Delete"),o("button",{onClick:$,class:"download-button"},"Download")]),(i(),_(q,{id:t.value,key:t.value},null,8,["id"])),o("div",P,[(i(),_(b,{id:t.value,key:t.value,class:"img"},null,8,["id"]))]),o("div",T,[a[3]||(a[3]=o("h4",null,"Similar to this one:",-1)),L(o("select",{id:"number-select","onUpdate:modelValue":a[1]||(a[1]=s=>n.value=s),class:"number-select"},a[2]||(a[2]=[x('<option value="1" data-v-00fd40df>1</option><option value="3" data-v-00fd40df>3</option><option value="5" data-v-00fd40df>5</option><option value="10" data-v-00fd40df>10</option><option value="20" data-v-00fd40df>20</option>',5)]),512),[[U,n.value]])]),o("div",N(e.$attrs,{class:"gallery"}),[(i(!0),r(y,null,B(g.value,s=>(i(),r("div",{key:s.id,class:"img-wrapper",onClick:K=>I(s.id)},[V(b,{id:s.id,class:"image-similar"},null,8,["id"]),o("span",H,u(s.distance.toFixed(2)),1)],8,G))),128))],16)],64))}}),Z=w(J,[["__scopeId","data-v-00fd40df"]]);export{Z as default};
