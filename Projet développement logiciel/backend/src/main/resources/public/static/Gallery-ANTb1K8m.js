import{d as w,r as u,c,w as C,a as o,b as m,v as E,e as U,o as d,f as B,g as I,F as f,h as $,i as v,n as G,u as b}from"./index-BzaV7hh7.js";import{a as h}from"./http-api-CiJTaV0F.js";import{_ as F}from"./Image.vue_vue_type_style_index_0_lang-CkyqbBND.js";import M from"./Upload-CJsNz4iR.js";import{_ as y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"search-bar"},P=w({__name:"Bar",emits:["search"],setup(D,{emit:g}){const t=u("");function a(){console.log(t.value)}return(s,r)=>(d(),c("div",N,[C(o("input",{"onUpdate:modelValue":r[0]||(r[0]=p=>t.value=p),type:"text",placeholder:"Type keywords... (plz coco)",onKeyup:U(a,["enter"])},null,544),[[E,t.value]]),o("button",{onClick:a},"Search"),m(M)]))}}),S=y(P,[["__scopeId","data-v-e86aa999"]]),T={class:"gallery"},V=["onClick"],z=w({__name:"Gallery",setup(D){const g=b(),t=u([]),a=u(!1);B(()=>{s(),window.addEventListener("imageUploaded",s)}),I(()=>{window.removeEventListener("imageUploaded",s)});function s(){h.getImageList().then(e=>{t.value=e}).catch(e=>{console.log(e.message)})}const r=e=>{g.push(`/view_image/${e}`)};function p(e){e.preventDefault(),a.value=!0}function k(){a.value=!1}function L(e){var n;e.preventDefault(),a.value=!1;const l=(n=e.dataTransfer)==null?void 0:n.files;if(l&&l.length>0){const i=l[0];if(i.type==="image/png"||i.type==="image/jpeg"){const _=new FormData;_.append("file",i),h.createImage(_).then(()=>{window.dispatchEvent(new Event("imageUploaded"))}).catch(x=>{console.log(x.message)})}else alert("Please drop a PNG or JPEG image.")}}return(e,l)=>(d(),c(f,null,[o("header",null,[m(S)]),o("div",{class:G(["gallery-container",{dragging:a.value}]),onDragover:v(p,["prevent"]),onDragleave:k,onDrop:v(L,["prevent"])},[o("div",T,[(d(!0),c(f,null,$(t.value,n=>(d(),c("div",{key:n.id,class:"img-wrapper",onClick:i=>r(n.id)},[m(F,{id:n.id},null,8,["id"])],8,V))),128))])],34)],64))}}),R=y(z,[["__scopeId","data-v-580e9719"]]);export{R as default};
